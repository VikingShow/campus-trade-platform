# 2Hand - 又又校园二手交流平台

这是一个功能完善、技术栈现代化的全栈Web项目，旨在为大学生提供一个安全、便捷、智能的二手物品在线交易社区。

---

## 目录

- [项目组成](#项目组成)
- [技术栈](#技术栈)
- [已实现功能](#已实现功能)
- [环境依赖](#环境依赖)
- [快速开始](#快速开始)
- [目录结构说明](#目录结构说明)
- [技术亮点](#技术亮点)
- [常见问题与说明](#常见问题与说明)
- [贡献与反馈](#贡献与反馈)

---

## 项目组成

本项目采用业界主流的前后端分离架构，由三个独立的子项目构成，并通过 Monorepo（单一代码库）的形式进行统一管理。

- `campus-trade-api`：**后端服务**。基于 Spring Boot 构建，负责所有业务逻辑、API接口、数据持久化和安全认证。
- `campus-trade-web`：**前端用户端**。基于 Vue 3 和 Element Plus 构建的单页面应用（SPA），为普通用户提供商品浏览、发布、交易、私信等核心功能。
- `campus-trade-admin`：**前端管理后台**。一个独立的、基于 Vue 3 和 Element Plus 的单页面应用，为管理员提供用户、商品、订单等数据的统一管理和监控功能。

---

## 技术栈

| **类别**     | **技术**             | **描述**                                                     |
| ------------ | -------------------- | ------------------------------------------------------------ |
| **后端**     | Spring Boot          | 项目基础框架，简化配置与开发。                               |
|              | Spring Security      | 负责认证与授权，实现基于角色的访问控制 (RBAC)。              |
|              | JWT (JSON Web Token) | 用于生成和验证无状态的身份令牌。                             |
|              | MyBatis              | 持久层框架，通过 XML 管理 SQL，实现业务与数据解耦。          |
|              | MySQL / MariaDB      | 作为主数据库，存储所有核心业务数据。                         |
|              | Redis                | 作为缓存中间件，通过 Spring Cache 提升热点数据查询性能。     |
|              | PageHelper           | MyBatis 分页插件，轻松实现后台数据的物理分页。               |
| **前端**     | Vue 3                | 采用最新的组合式 API (Composition API) 进行开发。            |
|              | Vite                 | 新一代前端构建工具，提供极速的开发体验。                     |
|              | Vue Router           | 官方路由管理器，负责前端页面的跳转和导航。                   |
|              | Pinia                | 新一代官方推荐的状态管理库，用于管理用户登录状态等全局数据。 |
|              | Element Plus         | 高质量的桌面端 UI 组件库，保证了界面的美观和一致性。         |
|              | ECharts              | 用于后台管理系统的数据可视化，生成动态图表。                 |
| **部署**     | Nginx                | 作为反向代理和静态资源服务器。                               |
|              | Systemd              | 在 Linux 系统上管理后端服务的启停和开机自启。                |
| **版本控制** | Git & GitHub         | 用于代码的版本管理和远程备份。                               |

---

## 已实现功能

### 用户端 (campus-trade-web)

- [x] **用户模块**：注册、登录、个人信息编辑（昵称、头像、简介）。
- [x] **商品模块**：首页商品流、按关键词/分类/价格区间筛选、多维度排序。
- [x] **商品详情**：多图轮播展示、卖家信息（信誉分）展示、收藏功能。
- [x] **发布模块**：支持多图上传（最多3张，带预览）、表单校验。
- [x] **订单模块**：创建订单、查看买/卖订单列表、更新订单状态（取消、确认完成）。
- [x] **评价系统**：订单完成后可进行评分和评论，自动更新用户信誉分。
- [x] **私信系统**：用户间可就商品进行私信沟通，拥有独立的会话列表和聊天窗口。
- [x] **收藏功能**：用户可收藏/取消收藏商品，并在个人中心查看收藏列表。
- [x] **智能推荐**：在商品详情页，基于协同过滤算法推荐"猜你喜欢"的商品。
- [x] **通知中心**：支持系统通知、订单状态变更等消息的推送和已读管理。

### 管理后台 (campus-trade-admin)

- [x] **安全登录**：只有被授予 `ADMIN` 角色的用户才能登录。
- [x] **仪表盘**：可视化展示平台核心数据（用户、商品、订单总数）和近期用户增长趋势图表。
- [x] **用户管理**：分页展示所有用户列表，支持搜索、禁用/启用用户账户、编辑、删除、重置密码、修改信誉分。
- [x] **商品管理**：分页展示所有商品列表，支持搜索、强制下架、编辑、删除商品。
- [x] **订单管理**：分页展示所有订单列表，支持按订单ID、状态、配送方式等多条件筛选和精确搜索。
- [x] **交易地点管理**：增、删、改、查平台官方推荐的线下交易地点。
- [x] **配送管理**：
  - 统计卡片：待发货、已发货、已完成、总订单数实时统计。
  - 订单筛选：按状态、配送方式、订单ID等多条件筛选。
  - 收货信息：展示收件人姓名、电话、完整地址。
  - 发货操作：支持单个发货、批量发货（填写快递公司和单号）、订单详情查看。
  - 状态管理：发货状态、完成状态一键更新，状态可视化。
  - 数据导出：支持筛选后订单数据导出为 Excel/CSV 文件，自动生成带日期的文件名。
- [x] **批量操作**：如批量发货、批量状态更新等。
- [x] **通知推送**：订单发货、创建等操作自动推送通知给相关用户。

### 后端 (campus-trade-api)

- [x] **RESTful API**：为前后端提供统一的数据接口。
- [x] **权限与认证**：基于 Spring Security + JWT 实现用户和管理员的权限隔离。
- [x] **缓存优化**：分类等热点数据使用 Redis 缓存。
- [x] **分页与搜索**：所有管理端列表均支持分页和多条件搜索。
- [x] **通知系统**：支持系统通知、订单通知的创建、查询、已读管理。
- [x] **数据导出**：支持订单数据的导出接口，便于运营统计和数据分析。
- [x] **统计分析**：用户、订单、商品等多维度数据统计接口。

---

## 环境依赖

- Node.js >= 16.x
- npm >= 8.x
- JDK >= 17
- Maven >= 3.6
- MySQL 或 MariaDB
- Redis
- 推荐操作系统：Linux/Windows/MacOS

---

## 快速开始

### 1. 克隆项目

```bash
git clone <你的仓库地址>
cd campus-trade-platform
```

### 2. 数据库初始化

- 创建数据库（如 `campus_trade`），导入 `campus-trade-api/src/main/resources/campus_trade.sql` 脚本。

### 3. 配置后端

- 修改 `campus-trade-api/src/main/resources/application.yml` 或 `application.properties`，配置数据库和 Redis 连接信息。

### 4. 启动后端服务

```bash
cd campus-trade-api
./mvnw spring-boot:run
```

### 5. 启动前端用户端

```bash
cd campus-trade-web
npm install
npm run dev
```

### 6. 启动管理后台

```bash
cd campus-trade-admin
npm install
npm run dev
```

---

## 目录结构说明

- `campus-trade-api`：后端 Spring Boot 服务，提供 RESTful API、权限认证、数据持久化等。
- `campus-trade-web`：前端用户端，Vue 3 + Element Plus，普通用户使用。
- `campus-trade-admin`：管理后台，Vue 3 + Element Plus，管理员使用。

---

## 技术亮点

- 前后端完全分离，接口规范清晰，易于扩展和维护。
- 后端采用 RBAC 权限模型，支持多角色（用户/管理员）权限隔离。
- 支持 JWT 无状态认证，安全性高。
- 热门数据 Redis 缓存，极大提升访问性能。
- 管理后台支持批量操作、数据导出、可视化统计。
- 用户端体验友好，支持智能推荐、私信、收藏、评价等丰富功能。
- 代码结构清晰，注释详细，易于二次开发。

---

## 常见问题与说明

- **端口冲突**：前端默认 5173，管理后台默认 5174，后端默认 8080，如有冲突请在各自配置文件中修改。
- **图片上传/访问**：开发环境下图片通过 `/uploads` 代理到后端，生产环境建议使用 Nginx 静态资源托管。
- **管理员账号**：如无初始管理员账号，请直接在数据库 `user` 表插入一条 `role=ADMIN` 的用户数据。
- **接口文档**：如需 API 文档，可使用 Swagger 或 Postman 进行接口调试。

---

## 贡献与反馈

欢迎提交 Issue 或 Pull Request 参与项目共建。如有建议或问题，请在 GitHub Issue 区留言。